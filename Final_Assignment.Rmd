---
title: "Final Assignment"
author: "Ben Merz"
date: "2023-01-31"
output: 
  prettydoc::html_pretty:
  theme: cayman
  highlight: github
---

# Assignment
Download a publicly available data set and reproduce figures and/or an analysis from an article.

# Goal Graphs
Data set citation: Dai, Licong et al. (2020), Biomass allocation and productivity–richness relationship across four grassland types at the Qinghai Plateau, Dryad, Dataset, https://doi.org/10.5061/dryad.j9kd51c7s

Paper citation: Dai, L, Guo, X, Ke, X, et al. Biomass allocation and productivity–richness relationship across four grassland types at the Qinghai Plateau. Ecol Evol. 2020; 10: 506– 516. https://doi.org/10.1002/ece3.5920

![](/Users/BenM/Library/Mobile Documents/com~apple~CloudDocs/Documents/College/Bio/Reproducible R/Git Repository/BIOL1007A/Data/Final/Dai_Fig4.jpeg)
Figure 4: Relationships between aboveground biomass (AGB) and belowground biomass (BGB) in (a) temperate grassland, (b) desert grassland, (c) meadow steppe, and (d) alpine meadow

# My Attempt
```{r message=FALSE, warning=FALSE}
## set up libraries
library(tidyverse)
library(ggthemes)
library(patchwork)
library(ggpmisc)

# import dowloaded data from dryad
fDataBad <- read.table(file = "/Users/BenM/Library/Mobile Documents/com~apple~CloudDocs/Documents/College/Bio/Reproducible R/Git Repository/BIOL1007A/Data/Final/Data.csv", sep = ",", header = T)

glimpse(fDataBad)

# file was an excel sheet converted to a csv
# manually reorganized columns into long format
# pivot longer could not due work on the csv file due 
# to formatting problems made in excel
fDataGood <- read.table(file = "/Users/BenM/Library/Mobile Documents/com~apple~CloudDocs/Documents/College/Bio/Reproducible R/Git Repository/BIOL1007A/Data/Final/Dai_Data_2.csv", sep = ",", header = T)

colnames(fDataGood) <- c("Grassland.Type", "BGB", "AGB", "Species.Richness")

glimpse(fDataGood)

fDataGood$logBGB <- log(fDataGood$BGB)
fDataGood$logAGB <- log(fDataGood$AGB)

temperate_Data <- subset(fDataGood, Grassland.Type == "Temperate grassland")



#####################################
# Figure 4: Relationships between aboveground biomass (AGB) and belowground biomass (BGB) in (a) temperate grassland, (b) desert grassland, (c) meadow steppe, and (d) alpine meadow
#------------------------------------

# temperate grassland 
logAGB_temp <- ggplot(data = temperate_Data, aes(x = logBGB, y = logAGB)) + # aes(x = log(BGB), y = log(AGB))) +
  geom_point() +
  stat_ma_line(range.x = 2.4, range.y = 3.8, method = "RMA")
#  stat_smooth(method = "lm", se = 0.99)

print(logAGB_temp)


AGB_temp <- ggplot(data = temperate_Data, aes(x = Species.Richness, y = AGB)) + # aes(x = log(BGB), y = log(AGB))) +
  geom_point() +
  stat_smooth(method = "lm") +
  theme_few()

print(AGB_temp)

```


